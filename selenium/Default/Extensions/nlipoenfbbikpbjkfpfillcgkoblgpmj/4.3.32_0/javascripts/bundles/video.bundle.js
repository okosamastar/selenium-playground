(()=>{"use strict";var e,t={87842:(e,t,n)=>{n(21209);var i=n(19181),o=(n(91826),n(32074)),r=(n(69754),n(55026)),a=(n(50904),n(38648)),s=(n(45186),n(71577)),c=(n(84968),n(90071)),l=(n(61348),n(80923)),d=(n(53890),n(25779)),u=n(67294),m=n(73935),p=n(2877),f=n(8212),h=n(9669),v=n.n(h),g=(n(27484),n(40705),n(28374),n(85893));function w(e){window.open(e)}function y(e){var t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.top="-999999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function x(e){var t=e.filename;"true"===localStorage["save-as"]&&localStorage.download_directory&&(e.filename=localStorage.download_directory+"/"+e.filename),chrome.downloads.download(e,(function(n){(void 0===n||chrome.runtime.lastError)&&function(e,t){var n=document.createElement("a"),i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.setAttribute("href",e),n.setAttribute("download",t),n.rel="noopener",n.dispatchEvent(i)}(e.url,t)}))}var b="https://www.awesomescreenshot.com",j="https://www.awesomescreenshot.com/api/v1",N=["/premium/stripe/create_plan","/premium/stripe/change_plan","/folder/create","/folder/add_items","/folder/change_name","/trash/throw_into","/image/change_title","/video/update_title","/trash/restore","/trash/delete","/image/upload"],S=v().create({baseURL:j});function k(){return(e=b,t=["screenshot_personal_fullname","screenshot_personal_type","screenshot_personal_mail","screenshot_peronal_premium_level"],new Promise((function(n,i){chrome.cookies.getAll({url:e},(function(e){if("string"==typeof t){var i=e.filter((function(e){return e.name===t}));n(i)}else if(Array.isArray(t)){var o=e.filter((function(e){return-1!==t.indexOf(e.name)}));n(o)}}))}))).then((function(e){if(e.length){var t={};return e.forEach((function(e){t[e.name]=e})),{username:decodeURI(t.screenshot_personal_fullname.value),type:t.screenshot_personal_type.value,mail:t.screenshot_personal_mail.value,premiumLevel:t.screenshot_personal_premium_level?t.screenshot_personal_premium_level.value:""}}return null}));var e,t}function _(e){return S({method:"POST",url:"/user/stuff",data:{type:e}})}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}S.interceptors.request.use((function(e){return e}),(function(e){return r.ZP.error("Network error, Request timeout!"),Promise.reject()})),S.interceptors.response.use((function(e){if(e&&e.data&&1===e.data.code)return Promise.resolve(e.data.data);if(e.data.code,e.data.msg){if(-1!==N.indexOf(e.config.url))return Promise.reject(e.data.msg);if(r.ZP.error(e.data.msg),"/pricing"!==window.location.pathname)return Promise.reject(e.data.msg)}}),(function(e){if(e.response){var t=e.response.status;r.ZP.error("Network error! Error Code "+t)}return Promise.reject(e)}));const U=function(e){var t,n;return(0,g.jsx)(l.Z,E(E({},e),{},{footer:null,maskClosable:!1,wrapClassName:"sign-in",destroyOnClose:!0,centered:!0,children:(0,g.jsxs)("div",{className:"signin-alert-modal",children:[(0,g.jsx)("div",{className:"tip",children:(n=e.type,"aws"===n?(t="ext_loc_upload_image","You need to sign in to an Awesome Screenshot account in order to upload images."):"drive"===n?(t="ext_loc_drive","You need to sign in to an Awesome Screenshot account in order to connect with cloud services."):"des"===n?(t="ext_loc_destination","You need to sign in to an Awesome Screenshot account in order to connect with other services."):"uploadVideo"===n?(t="ext_loc_upload_video","You need to sign in to an Awesome Screenshot account in order to upload videos."):"")}),(0,g.jsx)(s.Z,{type:"primary",size:"large",block:!0,onClick:function(){var e="https://www.awesomescreenshot.com/signin";t&&(e+="?from="+t),window.open(e)},children:"Sign In"})]})}))};window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;var A=null;function P(e){var t="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}return t}const R={fs:null,getFs:function(){return new Promise((function(e,t){window.requestFileSystem(window.PERSISTENT,52428800,(function(t){e(t)}),(function(e){t(e)}))}))},save:function(e,t){var n=this;return this.getFs().then((function(i){return n.do_save(i,e,t)}),P)},append:function(e,t){A?A.write(e):this.getFs().then((function(n){n.root.getFile(t,{create:!1},(function(t){t.createWriter((function(t){t.onwriteend=function(e){},t.onerror=function(e){},t.write(e),A=t}),(function(e){}))}),(function(e){}))}))},do_save:function(e,t,n){return new Promise((function(i,o){e.root.getFile(n,{create:!0},(function(e){e.createWriter((function(n){n.onwriteend=function(t){i(e.toURL())},n.onerror=function(e){o(e.toString())},n.write(t),A=n}),(function(e){o(e)}))}),(function(e){o(e)}))}))},getFile:function(e){var t=this;return new Promise((function(n,i){t.getFs().then((function(t){t.root.getFile(e,{},(function(e){e.file((function(e){n(e)}),i)}),i)}))}))}};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,o,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Z=d.Z.TextArea,M=l.Z.confirm,B=(chrome.extension.getBackgroundPage(),null),V="";window.needUpload="",window.bindEvents=!1;var z=function(e){return(0,g.jsxs)(c.Z,{onFinish:function(t){e.onSubmit(t)},children:[(0,g.jsx)(c.Z.Item,{name:"title",rules:[{required:!0,message:"Title can't be empty!"}],initialValue:e.defaultValue,children:(0,g.jsx)(Z,{})}),(0,g.jsxs)(c.Z.Item,{className:"video-edit-title-btn-area",children:[(0,g.jsx)(s.Z,{onClick:e.onCancel,children:"Cancel"}),(0,g.jsx)(s.Z,{type:"primary",htmlType:"submit",loading:e.isLoading,children:"Done"})]})]})},Y=function(e){var t=chrome.extension.getBackgroundPage(),n=F((0,u.useState)(null),2),c=n[0],m=n[1],h=F((0,u.useState)("upload"),2),b=h[0],j=h[1],N=F((0,u.useState)("upload"),2),O=N[0],E=N[1],C=F((0,u.useState)("upload"),2),A=C[0],P=C[1],D=F((0,u.useState)(!0),2),L=(D[0],D[1],F((0,u.useState)(0),2)),Z=L[0],Y=L[1],q=F((0,u.useState)(0),2),W=q[0],G=q[1],J=F((0,u.useState)(0),2),K=J[0],Q=J[1],X=F((0,u.useState)(!1),2),$=X[0],H=X[1],ee=F((0,u.useState)(!1),2),te=ee[0],ne=ee[1],ie=F((0,u.useState)(!1),2),oe=ie[0],re=ie[1],ae=F((0,u.useState)(t.googleOAuth.getAccount().email),2),se=ae[0],ce=ae[1],le=F((0,u.useState)(!1),2),de=le[0],ue=le[1],me=(0,u.useRef)(null);(0,u.useEffect)((function(){return null!==c&&""===c.detail.thumbnailUrl&&me.current.addEventListener("canplay",(function(){ke()})),document.addEventListener("visibilitychange",_e),function(){document.removeEventListener("visibilitychange",_e)}}),[c,b]),(0,u.useEffect)((function(){var e=new URLSearchParams(window.location.search);(V=parseInt(e.get("id")))&&DB.init().then((function(){DB.get(V).then((function(e){m(e),e.detail.youtubeUrl&&E("uploaded"),e.detail.gDriveUrl&&P("uploaded"),e.detail.awsUrl&&j("uploaded"),me.current.addEventListener("progress",t),me.current.currentTime=99999999}))}));var t=function e(){me.current.buffered.end(0)&&me.current.currentTime>0&&(me.current.currentTime=0,me.current.removeEventListener("progress",e))};chrome.cookies.get({url:"https://www.awesomescreenshot.com",name:"screenshot_personal_type"},(function(e){e?0==e.value&&ue(!0):ue(!0)})),chrome.storage.sync.get(["captureCount"],(function(e){e.captureCount?chrome.storage.sync.set({captureCount:(isNaN(parseInt(e.captureCount))?0:parseInt(e.captureCount))+1}):chrome.storage.sync.set({captureCount:1}),k().then((function(e){if(e){var t=e.username;S({method:"GET",url:"/user/info"}).then((function(e){null!=e.permissions.showChromeFiveStarNever?ge(t,e.permissions.showChromeFiveStarNever):ge(t,!1)}))}else ge("",!1)}))}))}),[]);var pe,fe,he,ve,ge=function(e,t){chrome.storage.sync.get(["captureCount","clickNo","neverShow"],(function(n){if(!n.neverShow&&!t){if(n.clickNo)var i=200;else i=100;n.captureCount&&n.captureCount>i&&Se(e)}}))},we=function(){chrome.storage.sync.get(["clickNo"],(function(e){e.clickNo?chrome.storage.sync.set({neverShow:!0}):chrome.storage.sync.set({clickNo:!0})})),k().then((function(e){e&&_("chromeFiveStarCancel")})),a.Z.destroy()},ye=function(e,t){a.Z.open({key:"questionnaire",className:"questionnaire",placement:"bottomRight",duration:0,style:{width:418,marginLeft:-63,padding:"20px 30px"},message:e,description:t,onClose:we})},xe=function(){w("https://chrome.google.com/webstore/detail/awesome-screenshot-screen/nlipoenfbbikpbjkfpfillcgkoblgpmj/reviews"),chrome.storage.sync.set({neverShow:!0}),k().then((function(e){e&&_("chromeFiveStarClick")})),a.Z.destroy()},be=function(){w("/feedback.html"),chrome.storage.sync.set({captureCount:0,clickNo:!1,neverShow:!1}),k().then((function(e){e&&_("chromeFiveStarFeedback")})),a.Z.destroy()},je=function(){var e;ye((0,g.jsxs)("div",{className:"noti_title",children:[(0,g.jsx)("img",{src:"images/star.png"})," User Satisfaction Survey"]}),(0,g.jsxs)("div",{className:"noti_des",children:[(0,g.jsx)("div",{className:"content",children:"Your review means a lot to us. Would you mind taking a moment to rate the extension in the Web Store?"}),(0,g.jsx)(s.Z,(e={style:{width:"98px",height:"34px"},type:"primary",onClick:we},T(e,"type","primary"),T(e,"ghost",!0),T(e,"children","No, thanks"),e)),(0,g.jsx)(s.Z,{style:{width:"246px",height:"34px",marginLeft:"14px"},type:"primary",onClick:xe,children:"Sure, take me to the Web Store"})]}))},Ne=function(){var e;ye((0,g.jsxs)("div",{className:"noti_title",children:[(0,g.jsx)("img",{src:"images/star.png"})," User Satisfaction Survey"]}),(0,g.jsxs)("div",{className:"noti_des",children:[(0,g.jsx)("div",{className:"content",children:"Would you like to report any issues you're experiencing or give us some suggestions so that we can make the extension better for you?"}),(0,g.jsx)(s.Z,(e={style:{width:"98px"},type:"primary",onClick:we},T(e,"type","primary"),T(e,"ghost",!0),T(e,"children","No, thanks"),e)),(0,g.jsx)(s.Z,{style:{width:"246px",marginLeft:"14px"},type:"primary",onClick:be,children:"Yes, take me to the feedback form"})]}))},Se=function(e){var t,n="Are you enjoying Awesome Screenshot?";ye((0,g.jsxs)("div",{className:"noti_title",children:[(0,g.jsx)("img",{src:"images/star.png"})," User Satisfaction Survey"]}),(0,g.jsxs)("div",{className:"noti_des",children:[e?(0,g.jsxs)("div",{className:"content",children:["Hi ",(0,g.jsxs)("p",{className:"user_name",children:[" ",e]})," , ",n]}):(0,g.jsx)("div",{className:"content",children:n}),(0,g.jsx)(s.Z,(t={style:{width:"172px"},type:"primary",onClick:Ne},T(t,"type","primary"),T(t,"ghost",!0),T(t,"children","Not really"),t)),(0,g.jsx)(s.Z,{style:{width:"172px",marginLeft:"14px"},type:"primary",onClick:je,children:"Yes"})]}))},ke=function(){var e=document.createElement("canvas");e.width=320,e.height=180;var t=e.getContext("2d"),n=me.current;t.drawImage(n,0,0,e.width,e.height);e.toBlob((function(e){R.save(e,c.id+"_thumbnail.png").then((function(e){var t=I(I({},c),{},{detail:I(I({},c.detail),{},{thumbnailUrl:e})});m(t),DB.update(V,t)}))}))},_e=function(){"visible"===document.visibilityState&&window.needUpload&&Re()},Oe=function(e){return new Promise((function(t,n){var i="filesystem:"+chrome.extension.getURL("persistent/"),o=new RegExp(i),r=e.replace(o,"");R.getFile(r).then((function(e){t(e)}),(function(e){n("Get file error: ["+e+"]")}))}))},Ee=function(e,t){var n=I(I({},c),{},{detail:I(I({},c.detail),{},T({},e+"Url",t))});m(n),DB.update(V,n),"aws"===e&&chrome.tabs.create({url:t})},Ce=function(e){G(e)},Ue=function(e){Q(e)},Ae=function(e,t,n){return new Promise((function(i,o){(function(e,t,n){var i=new FormData;for(var o in e)i.append(o,e[o]);var r=n||"https://awesomescreenshot.s3.amazonaws.com/";return v()({method:"POST",crossdomain:!0,url:r,data:i,onUploadProgress:function(e){var n=Math.round(100*e.loaded/e.total);t(n)}})})(e,t,n).then((function(){i()}),(function(e){o("S3 "+e.toString())}))}))},Pe=function(){k().then((function(e){if(e&&e.username){j("uploading");var n="";c&&c.detail?c.detail.title:window.needUpload.title,c&&c.detail?c.fileUrl:window.needUpload.fileUrl;window.needUpload="";var i={title:c.detail.title,userAgent:navigator.userAgent,client:/Edg/.test(navigator.userAgent)?"Edge extension":"chrome extension",extVersion:t.currentversion,screenSize:window.screen.width*window.devicePixelRatio+"*"+window.screen.height*window.devicePixelRatio,size:c.detail.size,duration:c.detail.duration,createUnix:Math.round(c.detail.timeStamp/1e3)+""};c.detail.recordType&&(i.recordType=c.detail.recordType),(o=i,S({method:"POST",url:"video/upload_init",data:o})).then((function(e){return n=e.videoID,Oe(c.fileUrl).then((function(t){var n={AWSAccessKeyId:"AKIAJSCJQ2NM3XLFPVKA",acl:"private",key:e.s3Key,"Content-Type":"video/webm",policy:e.policy,signature:e.signature,file:t};return Ae(n,Y,e.s3URI)}),(function(e){return Promise.reject(e.toString())}))})).then((function(e){(function(e){return S({method:"POST",url:"/video/upload_complete",data:{videoID:e}})})(n).then((function(e){Ee("aws",e.videoURI),j("uploaded")}))})).catch((function(e){n&&function(e,t){S({method:"POST",url:"/video/upload_failed",data:{videoID:e,failedMessage:t}})}(n,e),j("upload")}))}else window.needUpload={title:c.detail.title,fileUrl:c.fileUrl},H(!0);var o}))},Re=function(){k().then((function(e){e&&e.username&&(H(!1),Pe())}))},De=function(){ne(!1)},Ie=function(){chrome.tabs.create({url:c.detail.awsUrl})},Te=function(e){y(e),r.ZP.success("Link has been copied to your clipboard!")},Fe=function(e,t,n){if("youtube"===e)var i="#cc181e";else if("gDrive"===e)i="#4285f4";else i="";return(0,g.jsxs)("div",{className:"upload-area",children:["uploading"===t&&(0,g.jsx)(o.Z,{percent:n,status:"active",showInfo:!1,size:"small",strokeColor:i}),"uploaded"===t&&function(e){return"aws"===e?(0,g.jsxs)("div",{className:"view-btn",onClick:Ie,children:[(0,g.jsx)("img",{className:"icon",src:"images/icon_viewOnAS.svg"}),"View on Awesome Screenshot"]}):(0,g.jsx)(d.Z,{defaultValue:c.detail[e+"Url"],prefix:(0,g.jsx)(p.Z,{}),onClick:Te.bind(null,c.detail[e+"Url"])})}(e)]})};return(0,g.jsx)("div",{className:"videoPage",children:c?(0,g.jsxs)("div",{className:"main-container",children:[(0,g.jsxs)("div",{className:"video-title",id:"video-title",children:[(0,g.jsx)("span",{className:"display-text",id:"display-text",title:"Edit name",onClick:function(){ne(!0)},children:(0,g.jsxs)("span",{className:"text",children:[c.detail.title,(0,g.jsx)(f.Z,{})]})}),(0,g.jsxs)("div",{className:"video-action",children:[(0,g.jsxs)("div",{className:"video-action-btn list",onClick:function(){window.location.href="/video-list.html"},children:[(0,g.jsx)("div",{className:"icon"}),"My Local Recordings"]}),(0,g.jsxs)("div",{className:"video-action-btn delete",onClick:function(){M({title:"Are you sure to delete this video?",okText:"Yes, delete",okType:"danger",cancelText:"No",onOk:function(){DB.delete(V).then((function(e){window.location.href="/video-list.html"}))},onCancel:function(){}})},children:[(0,g.jsx)("div",{className:"icon"}),"Delete"]})]})]}),(0,g.jsxs)("div",{className:"video-container",children:[(0,g.jsxs)("div",{className:"video-box",children:[(0,g.jsx)("video",{id:"video",controls:!0,src:c.fileUrl,ref:me}),(0,g.jsx)("div",{className:"video-tip",children:"Note: this video is temporarily saved under My Local Recordings and might be lost due to unexpected system or browser error. You can upload this video to awesomescreenshot.com or download it to local to avoid any possible data loss. We suggest you choose the Cloud option to save your recording next time."})]}),(0,g.jsxs)("div",{className:"info-box",children:[(0,g.jsxs)("div",{className:"info-group",children:[(0,g.jsx)("div",{className:"group-title",children:"Video Information"}),(0,g.jsxs)("div",{className:"info-item",children:[(0,g.jsx)("div",{className:"info-item-title",children:"Date Created:"}),(0,g.jsx)("span",{id:"info-time",children:(pe=new Date(c.detail.timeStamp),fe=pe.getDate(),he=pe.getMonth(),ve=pe.getFullYear(),["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"][he]+" "+fe+", "+ve)})]}),(0,g.jsxs)("div",{className:"info-item",children:[(0,g.jsx)("div",{className:"info-item-title",children:"Video Length:"}),(0,g.jsx)("span",{id:"info-duration",children:c.detail.duration})]}),(0,g.jsxs)("div",{className:"info-item",children:[(0,g.jsx)("div",{className:"info-item-title",children:"Video Size:"}),(0,g.jsx)("span",{id:"info-size",children:c.detail.size})]})]}),(0,g.jsxs)("div",{className:"info-group",children:[(0,g.jsx)("div",{className:"group-title",children:"Save to Awesome Screenshot"}),(0,g.jsx)("div",{className:"info-group-box",children:"upload"===b?(0,g.jsx)(s.Z,{className:"uploadAwsBtn",block:!0,type:"primary",onClick:Pe,children:"Upload to get shareable link"}):Fe("aws",b,Z)})]}),(0,g.jsxs)("div",{className:"info-group",children:[(0,g.jsx)("div",{className:"group-title",children:"Save to cloud"}),(0,g.jsxs)("div",{className:"upload-item",id:"youtube-upload",children:[(0,g.jsxs)("div",{className:"subtitle",children:[(0,g.jsx)("img",{src:"images/youtube.svg",alt:""}),"YouTube",(0,g.jsx)("div",{className:"upload-action",children:"uploaded"!==O&&(0,g.jsx)(s.Z,{type:"primary",size:"small",onClick:function(){return t.googleEvent("upload to youtube","local"),Oe(c.fileUrl).then((function(e){return B||(B=new File([e],c.detail.title+".webm",{type:"video/webm"})),E("uploading"),uploadVideo.uploadToYoutube(B,Ce)})).then((function(e){Ee("youtube","https://youtu.be/"+e.id),E("uploaded")})).catch((function(e){E("upload")}))},disabled:"upload"!==O,children:"upload"===O?"Upload":"Uploading"})})]}),(0,g.jsx)("div",{className:"upload-item-detail",children:Fe("youtube",O,W)})]}),(0,g.jsxs)("div",{className:"upload-item",id:"gDrive-upload",children:[(0,g.jsxs)("div",{className:"subtitle",children:[(0,g.jsx)("img",{src:"images/google-drive.svg",alt:""}),"Google Drive",(0,g.jsx)("div",{className:"upload-action",children:"uploaded"!==A&&(0,g.jsx)(s.Z,{type:"primary",size:"small",onClick:function(){return t.googleEvent("upload to google drive","local"),Oe(c.fileUrl).then((function(e){return B||(B=new File([e],c.detail.title+".webm",{type:"video/webm"})),P("uploading"),uploadVideo.uploadToGoogleDrive(B,Ue)})).then((function(e){Ee("gDrive",e.alternateLink),P("uploaded")})).catch((function(e){P("upload")}))},disabled:"upload"!==A,children:"upload"===A?"Upload":"Uploading"})})]}),(0,g.jsx)("div",{className:"upload-item-detail",children:Fe("gDrive",A,K)})]}),se&&(0,g.jsxs)("div",{className:"current-account",id:"current-account",children:["Current account:",(0,g.jsx)(i.Z,{content:(0,g.jsxs)("div",{className:"notice",id:"notice",children:["NOTICE: If you want to save video to another google account, please clear the authentication in awesome screenshot.",(0,g.jsx)("a",{className:"gdrive-signout",onClick:function(){t.googleOAuth.clearAccount(),ce(""),re(!1)},children:"Click to clear Authentication"})]}),trigger:"click",visible:oe,onVisibleChange:function(e){re(e)},children:(0,g.jsx)("span",{className:"current-account-email",id:"c-email",children:se})})]})]}),(0,g.jsxs)("div",{className:"info-group",children:[(0,g.jsx)("div",{className:"group-title",children:"Download"}),(0,g.jsx)("div",{className:"info-item",children:(0,g.jsxs)("div",{className:"subtitle",children:["In WebM format",(0,g.jsx)(s.Z,{className:"action-btn download-btn",type:"primary",size:"small",onClick:function(){chrome.permissions.request({permissions:["downloads"]},(function(e){e&&Oe(c.fileUrl).then((function(e){var t=c.detail.title.replace(/(\.|\:)/g," ").replace(/[#$~!@%^&*();'"?><\[\]{}\|,:\/=+]/g," ")+".webm";if(t=t.replace(/\s+/g,"-"),e.size<1442116762)try{!function(e,t){if("undefined"==typeof EBML)throw new Error("Please link: https://cdn.webrtc-experiment.com/EBML.js");var n=new EBML.Reader,i=new EBML.Decoder,o=EBML.tools,r=new FileReader;r.onload=function(e){i.decode(this.result).forEach((function(e){n.read(e)})),n.stop();var r=o.makeMetadataSeekable(n.metadatas,n.duration,n.cues),a=this.result.slice(n.metadataSize),s=new Blob([r,a],{type:"video/webm"});t(s)},r.readAsArrayBuffer(e)}(e,(function(e){x({url:URL.createObjectURL(e),filename:t,saveAs:!0})}))}catch(n){x({url:URL.createObjectURL(e),filename:t,saveAs:!0})}else x({url:URL.createObjectURL(e),filename:c.detail.title+".webm",saveAs:!0})}))})),t.googleEvent("download video","local")},children:"Download"})]})})]}),de&&(0,g.jsxs)("div",{className:"tip",children:["Recording length is limited to",(0,g.jsx)("span",{children:" 5 minutes"}),". Upgrade to unlock the unlimited recordings.",(0,g.jsx)("div",{children:(0,g.jsx)("a",{className:"upgrade-btn",id:"upgrade-btn",onClick:function(){chrome.extension.getBackgroundPage().goToUpgrade("Record_final")},children:"UPGRADE"})})]})]})]}),(0,g.jsx)(U,{visible:$,onCancel:function(){H(!1)},onSignInFinish:Re,type:"uploadVideo"}),(0,g.jsx)(l.Z,{title:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(f.Z,{className:"title-icon"}),(0,g.jsx)("span",{className:"title",children:"Edit Title"})]}),destroyOnClose:!0,maskClosable:!1,visible:te,className:"video-modal",footer:null,onCancel:De,children:(0,g.jsx)("div",{className:"edit-area",children:(0,g.jsx)(z,{defaultValue:c.detail.title,onCancel:De,onSubmit:function(e){var t=I(I({},c),{},{detail:I(I({},c.detail),{},{title:e.title})});m(t),DB.update(V,t),ne(!1)},isLoading:!1})})})]}):""})};m.render((0,g.jsx)(Y,{}),document.getElementById("video-page-wrapper"))}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,n,o,r)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,o,r]=e[d],s=!0,c=0;c<n.length;c++)(!1&r||a>=r)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(s=!1,r<a&&(a=r));if(s){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,o,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={791:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[a,s,c]=n,l=0;for(o in s)i.o(s,o)&&(i.m[o]=s[o]);if(c)var d=c(i);for(t&&t(n);l<a.length;l++)r=a[l],i.o(e,r)&&e[r]&&e[r][0](),e[a[l]]=0;return i.O(d)},n=self.webpackChunkawesomescreenshot_front=self.webpackChunkawesomescreenshot_front||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.O(void 0,[186,377,91,116,618,247,163,808,140,266],(()=>i(33505)));var o=i.O(void 0,[186,377,91,116,618,247,163,808,140,266],(()=>i(87842)));o=i.O(o)})();