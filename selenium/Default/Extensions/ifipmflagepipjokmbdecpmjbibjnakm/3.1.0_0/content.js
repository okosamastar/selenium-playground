!function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);const s=navigator.userAgent.indexOf("Firefox")>-1,n=window.navigator.userAgent.indexOf("Edg/")>-1,a=!!window.opr,i=!(n||a||s),c=()=>s?browser:window.chrome,u={count:0,minImageWidth:64,minImageHeight:64,maxFetchLatency:18e4,includeVectors:!0,fileMask:void 0};class l extends class{static isInlineSVG(e){return 0===(e||"").indexOf("<svg ")}static isBase64Image(e){return 0===(e||"").indexOf("data:image")}static noImages(){alert(c().i18n.getMessage("no_images"))}}{static isInstagram(){return window.location.origin.toLowerCase().indexOf("instagram.com")>=0}static isNonImageTag(e){return["SCRIPT","STYLE","NOSCRIPT","AUDIO","VIDEO","META"].indexOf(e)>=0}static getStyle(e){if(e.currentStyle)return e.currentStyle;return window.getComputedStyle(e,void 0)||{}}static getLargestSrcSet(e,t){let r=[];if(e.hasAttribute(t)&&e.getAttribute(t).length)return e.getAttribute(t).split(",").map(e=>{const[t,s]=e.trim().split(" "),n=parseInt((s||"0").replace(/[^0-9]/g,""),10);r.push([n,t.trim()])}),r.reverse(),r[0][1]}static extractBackgroundImage(e){let t=l.getStyle(e);if(t.backgroundImage&&t.backgroundImage.indexOf("gradient(")<0)return t.backgroundImage.slice(4,-1).replace(/"/g,"").replace(/'/g,"")}static isHidden(e){let t=l.getStyle(e);return"none"===t.display||"0"===t.opacity||"hidden"===t.visibility}static isInvalidUrl(e){return!e||""===e||"null"===e}static absoluteHref(e){let t=document.createElement("a");return t.href=(0===e.indexOf("//")?window.location.protocol+e:e).trim(),t.href}static imageMatch(e){return(e.match(/(http)?s?:?(\/\/[^"')(;]*\.(?:png|jpg|jpeg|gif|svg|bmp|apng|tiff|avif|webp))/gi)||[]).concat(e.match(/(data:image\/[^;]+;base64,[-A-Za-z0-9+/=;]+)/gi))}}class o{static get keys(){return{debug:"debug",count:"count",interval:"interval",maxFetchLatency:"maxFetchLatency",minImageHeight:"minImageHeight",minImageWidth:"minImageWidth",includeVectors:"includeVectors",fileMask:"fileMask"}}static getSettings(e){o.get(null,t=>e({...u,...t}))}static getDebugState(e){o.get([o.keys.debug],t=>{const r=t[o.keys.debug];e(void 0!==r&&r)})}static setDebugState(e,t){o.save(o.keys.debug,e,t)}static incrementCount(e){o.get(o.keys.count,t=>{const r=(t[o.keys.count]||0)+e;o.save(o.keys.count,r)})}static get(e,t){chrome.storage.local.get(e,t)}static save(e,t,r=null){chrome.storage.local.set({[e]:t},r)}}class g{constructor(){o.getSettings(e=>{g.pref=e,g.findImages(document),g.filterFinalResults(),g.sendResultToBackground()}),s&&c().runtime.onMessage.addListener(g.handleMessage)}static get pref(){return this.__pref||u}static set pref(e){this.__pref=e}static get urls(){return this.__urls||(this.__urls={}),this.__urls}static get result(){return this.__result||(this.__result=[]),this.__result}static handleMessage(e){e.empty&&(c().runtime.onMessage.removeListener(g.handleMessage),l.noImages())}static findImages(e){e&&e.body&&(g.iterateElements(e.body),g.findImagesInMarkup(e.body.outerHTML))}static iterateElements(e){if(!e||!e.tagName||l.isNonImageTag(e.tagName)||l.isHidden(e))return!1;const t=l.extractBackgroundImage(e);switch(t&&(g.urls[t]=1),e.tagName.toUpperCase()){case"IMG":case"SOURCE":g.handleImage(e);break;case"IFRAME":g.handleFrame(e);break;case"CANVAS":g.handleCanvas(e);break;case"SVG":g.pref.includeVectors&&g.handleInlineSvg(e)}for(let t=0;t<e.children.length;t++)g.iterateElements(e.children[t]);return!0}static findImagesInMarkup(e){l.imageMatch(e).filter(e=>e).map(e=>(e.indexOf(",http")>0||e.indexOf(" ")>0?e.split(/[\s,]+/).map(e=>{g.urls[e]=1}):g.urls[e]=1,!0))}static filterFinalResults(){Object.keys(g.urls).map(e=>{const t=l.isInlineSVG(e)||l.isBase64Image(e)?e:l.absoluteHref(e).trim();return!g.pref.includeVectors&&(l.isInlineSVG(e)||e.indexOf(".svg")>-1)||!l.isInvalidUrl(e)&&0!==g.urls[e]&&g.result.indexOf(t)<0&&g.result.push(t),!0}),g.result.sort()}static sendResultToBackground(){c().runtime.sendMessage({urls:g.result,title:document.title,href:window.location.href})}static handleImage(e){return g.srcset(e,"srcset")||g.srcset(e,"data-srcset")||g.src(e,"src")||g.src(e,"data-src")}static handleCanvas(e){g.urls[e.toDataURL()]=1}static handleInlineSvg(e){const t=e.outerHTML;g.urls[t]=1}static handleFrame(e){try{g.findImages(e.contentDocument)}catch(e){}}static srcset(e,t){const r=l.getLargestSrcSet(e,t);return r&&(g.urls[r]=1),!!r}static src(e,t){return!!e.hasAttribute(t)&&(g.urls[e.getAttribute(t)]=1,!0)}}new g}]);